import pygame
import pygame.camera
import datetime
import time
import re
import os

pygame.camera.init()
pygame.camera.list_cameras()
fcam = pygame.camera.Camera("/dev/frontcam", (1024,768))
bcam = pygame.camera.Camera("/dev/backcam", (1024,768))
fcam.start()
bcam.start()
while(1):
    timestr = time.strftime("%Y%m%d-%H%M%S")
    os.rename("/home/pi/marsbotcontrol/stills/f-current.jpeg", "/home/pi/marsbotcontrol/stills/f-{}{}".format(timestr, ".png"))
    os.rename("/home/pi/marsbotcontrol/stills/b-current.jpeg", "/home/pi/marsbotcontrol/stills/b-{}{}".format(timestr, ".png"))
    i = fcam.get_image()
    pygame.image.save(i, "/home/pi/marsbotcontrol/stills/f-current.png")
    print('saved front image')
    j = bcam.get_image()
    pygame.image.save(j, "/home/pi/marsbotcontrol/stills/b-current.png")
    print('saved back image\n')
    time.sleep(0.5)
